const axios = require('axios');

class TokenConnector {
    constructor(clientId, clientSecret, tokenUrl) {
        this.clientId = clientId;
        this.clientSecret = clientSecret;
        this.tokenUrl = tokenUrl;
    }

    async getAccessToken() {
        try {
            const credentials = Buffer.from(`${this.clientId}:${this.clientSecret}`).toString('base64');

            const data = new URLSearchParams();
            data.append('grant_type', 'client_credentials');

            const response = await axios.post(this.tokenUrl, data, {
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                    'Authorization': `Basic ${credentials}`
                }
            });

            const accessToken = response.data.access_token;
            return accessToken;
        } catch (error) {
            throw error;
        }
    }
}

module.exports = TokenConnector;
